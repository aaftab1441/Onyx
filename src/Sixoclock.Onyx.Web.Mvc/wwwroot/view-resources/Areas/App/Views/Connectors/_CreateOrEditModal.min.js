(function(n){app.modals.CreateOrEditConnectorModal=function(){var t,r=abp.services.app.connector,u=abp.services.app.oCPPFeature,i=null;this.init=function(n){t=n;i=t.getModal().find("form");i.validate();_$featuresInformationsForm=t.getModal().find("form[name=FeaturesInformationsForm]");_$featuresInformationsForm.validate()};this.save=function(){var n;if(i.valid()){var f=i.serializeFormToObject(),u=_$featuresInformationsForm.serializeArray(),e=[];for(n=0;n<u.length;n++)e.push({OCPPFeatureId:parseInt(u[n].value.split("_")[0]),FeatureName:u[n].value.split("_")[1],ChargepointModelConnectorId:0,TenantId:0});f.ConnectorFeatures=e;t.setBusy(!0);r.createOrUpdateConnector(f).done(function(){t.close();location.reload()}).always(function(){t.setBusy(!1)})}};n("#OCPPVersionId").change(function(){u.getOCPPFeaturesByOCPPVersionList({id:n("#OCPPVersionId").val()}).done(function(t){var i="";t.ocppFeatures.length>0?n("#OCPPFeaturesForm").css("display","block"):n("#OCPPFeaturesForm").css("display","none");n.each(t.ocppFeatures,function(){i+="<tr><td><label class='control-label col-sm-12 pull-left'><input name='ModelFeatureId' value='"+this.id+" _"+this.name+"' type='checkbox' ) /> "+this.name+"<\/label><\/td><\/tr>"});n("#OCPPFeatures").html(i)})})}})(jQuery);