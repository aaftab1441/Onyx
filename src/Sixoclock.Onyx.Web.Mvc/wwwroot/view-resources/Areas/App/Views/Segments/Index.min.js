(function(){function h(){var n={};return e.serializeArray().map(function(t){n[abp.utils.toCamelCase(t.name)]=t.value}),n}function u(){r.ajax.reload()}function c(t){abp.message.confirm("Are you sure you want to delete segment?",function(i){i&&n.deleteSegment({id:t.id}).done(function(){u(!0);abp.notify.success(app.localize("SuccessfullyDeleted"))})})}var f=$("#SegmentsTable"),e=$("#SegmentFilterForm"),n=abp.services.app.segment,t=new app.ModalManager({viewUrl:abp.appPath+"App/Segments/CreateOrEditSegmentModal",scriptUrl:abp.appPath+"view-resources/Areas/App/Views/Segments/_CreateOrEditModal.js",modalClass:"CreateOrEditSegmentModal"}),o=new app.ModalManager({viewUrl:abp.appPath+"App/Segments/SegmentServiceModel",scriptUrl:abp.appPath+"view-resources/Areas/App/Views/Segments/_SegmentServices.js",modalClass:"SegmentServicesModel"}),s=new app.ModalManager({viewUrl:abp.appPath+"App/Segments/SegmentDashboardModal"}),i,r;$("#CreateNewSegmentButton").click(function(n){n.preventDefault();t.open()});i=new app.ModalManager({viewUrl:abp.appPath+"App/Segments/SegmentUtilisationModal",scriptUrl:abp.appPath+"view-resources/Areas/App/Views/Segments/_Utilisation.js",modalClass:"SegmentUtilisationModal"});r=f.DataTable({paging:!0,serverSide:!0,processing:!0,listAction:{ajaxFunction:n.getSegment,inputFilter:function(){return h()}},columnDefs:[{targets:0,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{cssClass:"btn btn-xs btn-primary blue",text:'<i class="fa fa-cog"><\/i> '+app.localize("Actions")+' <span class="caret"><\/span>',items:[{text:app.localize("Edit"),action:function(n){t.open({id:n.record.id})}},{text:app.localize("Dashboard"),action:function(n){s.open({id:n.record.id})}},{text:app.localize("Utilisation"),action:function(n){i.open({id:n.record.id})}},{text:app.localize("Services"),action:function(n){o.open({id:n.record.id})}},{text:app.localize("DownloadExcel"),action:function(t){n.getSegmentsToExcel({id:t.record.id}).done(function(n){app.downloadTempFile(n)})}},{text:app.localize("Delete"),action:function(n){c(n.record)}}]}},{targets:1,data:"name"},{targets:2,data:"comment"},{targets:3,data:"creationTime",render:function(n){return moment(n).format("L")}}]});$("#ShowAdvancedFiltersSpan").click(function(){$("#ShowAdvancedFiltersSpan").hide();$("#HideAdvancedFiltersSpan").show();$("#SegmentFiltersArea").slideDown()});$("#HideAdvancedFiltersSpan").click(function(){$("#HideAdvancedFiltersSpan").hide();$("#ShowAdvancedFiltersSpan").show();$("#SegmentFiltersArea").slideUp()});$("#GetSegmentsButton, #RefreshSegmentsListButton").click(function(n){n.preventDefault();u()})})();