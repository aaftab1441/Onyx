(function(){$(function(){function i(){u.ajax.reload()}function f(){t.getBillsToExcel({}).done(function(n){app.downloadTempFile(n)})}var n=$("#BillsTable"),t=abp.services.app.bill,e={"delete":abp.auth.hasPermission("Pages.Grants.Delete")},r=new app.ModalManager({viewUrl:abp.appPath+"App/Bills/GetBillToAddComment",scriptUrl:abp.appPath+"view-resources/Areas/App/Views/Bills/_AddCommentModal.js",modalClass:"AddCommentModal"}),u=n.DataTable({paging:!0,serverSide:!0,processing:!0,ajax:function(i,r){t.getBillsList().done(function(t){n.data=t.bills;r(n)})},columnDefs:[{targets:0,data:null,orderable:!1,autoWidth:!1,defaultContent:"",rowAction:{cssClass:"btn btn-xs btn-primary blue",text:'<i class="fa fa-cog"><\/i> '+app.localize("Actions")+' <span class="caret"><\/span>',items:[{text:app.localize("AddComment"),action:function(n){r.open({id:n.record.id})}},{text:app.localize("Print"),action:function(n){print(n.record)}}]}},{targets:1,data:"number"},{targets:2,data:"billStatus"},{targets:3,data:"billType"},{targets:4,data:"totalkwh"},{targets:5,data:"transactions"},{targets:6,data:"comment"},{targets:7,data:"billDate"},{targets:8,data:"dueDate"}]});$("#ExportUsersToExcelButton").click(function(){f()});$("#RefreshGrantsButton").click(function(n){n.preventDefault();i()});abp.event.on("app.createOrEditBillModalSaved",function(){i()})})})();